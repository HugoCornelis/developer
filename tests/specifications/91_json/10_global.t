{"name":"91_json/10_global.t","description":"build testing logic, and operations not specific to client or developer mode","command_definitions":[{"command":"bin/neurospaces_build","description":"help message","command_tests":[{"read":"\n---\ncertification-report!: 0\ncheck!: 0\nclean!: 0\nclient!: 1\ncompile!: 1\nconfigure!: 1\nconfigure-type=s: release\nconfigure-with-prefix!: 0\ncountcode=s: ~\ndeveloper!: 0\ndirectories-create!: 0\ndisable=s: ~\ndist!: 0\ndist-dir=s: []\ndistcheck!: 0\ndistclean!: 0\ndistkeywords!: 0\ndocs!: 0\ndownload-server=s: 0\ndry-run!: 0\nenable=s: ~\nenvironment=s: []\nhelp!: 1\nhelp-all!: 0\nhelp-build-order!: 0\nhelp-descriptions!: 0\nhelp-operations!: 0\nhelp-packages!: 0\nhelp-repositories!: ~\ninstall!: 1\ninstalled-versions!: 1\nkeep-going!: ~\npackage-disabled-included!: 0\npackage-tags=s: []\npkg-deb!: 0\npkg-deb-dir=s: 0\npkg-rpm!: 0\npkg-rpm-dir=s: 0\npkg-tar!: 0\npkg-tar-dir=s: 0\nregex-selector=s: .*\nrelease-tag=s: 0\nrepo-ci=s: 0\nrepo-clone=s: 0\nrepo-co!: 0\nrepo-diff!: 0\nrepo-history!: 0\nrepo-history-last=i: 2\nrepo-init!: 0\nrepo-keys!: 0\nrepo-migrate!: 0\nrepo-pull=s: 0\nrepo-push=s: 0\nrepo-revert!: 0\nrepo-serve!: 0\nrepo-setup!: 0\nrepo-status!: 0\nrepo-sync=s: 0\nsrc-dir=s: ~\nsrc-tag=s: ~\ntag=s: 0\nuninstall!: 0\nuniversal!: 0\nunpack!: ~\nupload-server=s: ~\nupstream-version=s: ~\nverbose+: 0\nversion: ~\nversion=s: 0\nwebsite-prepare!: ~\nwebsite-upload!: ~\n\n\nneurospaces_build: configure, compile, check, install, tag and build\nreleases of packages selected from a set of packages.\n\nneurospaces_build can operate in two modes: the default one is for a\nclient machine, assuming a user who tries to install the packages.\nThe second mode is for a developer who follows the Neurospaces\nconventions where to put the src code of the packages.  The main\ndifference between the two modes is where this script finds the source\ncode.\n\nneurospaces_build creates a matrix of packages (rows) and build operations\n(columns).  neurospaces_build goes through the matrix, packages first, and\nperforms one build operation after the other for the selected package.\nThe options select or deselect cells in the matrix.\n\nTo find out what packages are in the database, use the '--help-packages'\noption.  Disabled packages are not put in the matrix, enabled packages\nare.  To disable packages, use the '--disable' option with a regex\nargument.  To enable packages, use the '--enable' option with a regex\nargument.  After building the matrix, rows are selected using\n'--regex-selector' option, which by default selects all rows.\n\nTo find out about the known build operations, use '--help'.  To\ndisable a build operation, prefix the corresponding option with\n'--no-', eg. to disable configure, use '--no-configure'.\n\noptions related to operation mode selection:\n    --client                 execute in client mode (for regular users, default).\n    --developer              execute in developer mode.\n\noptions related to operation execution profile:\n    --certification-report      annotate the (monotone) repository with the build_report.\n    --check                     check packages.\n    --clean                     clean before compiling.\n    --compile                   compile packages.\n    --configure                 configure before compiling.\n    --configure-with-prefix     configure with a hardcoded prefix.\n    --configure-type            type of configuration (default is 'release').\n    --countcode                 countcode at different times during the build.\n    --describe                  describe the function of packages.\n    --directories-create        create package directory structure.\n    --disable                   explicitly disable this regex of packages in the configuration.\n    --dist                      build distribution tarballs.\n    --dist-dir                  distribution directories to copy the tarballs to?\n    --distcheck                 check created tarballs.\n    --distclean                 distclean before compiling.\n    --distkeywords              do keyword expansion (be careful with this one).\n    --docs                      generate docs during compilation.\n    --dry-run                   do not execute any command, just report what would be done.\n    --enable                    explicitly enable these regex of packages in the configuration.\n    --help                      print usage information.\n    --help-all                  print usage, all packages and all operations.\n    --help-build-order          print information on software package build order.\n    --help-descriptions         print descriptions of the function of packages.\n    --help-operations           print known operations.\n    --help-packages             print known packages, in order of build.\n    --help-repositories         print known source code repositories.\n    --install                   install packages.\n    --installed-versions        print the installed version of each software package.\n    --keep-going                keep going in case of non-fatal errors (ala make -k).\n    --package-disabled-included also select disabled packages.\n    --package-tags              select packages based on the given tag(s).\n    --pkg-deb                   build debian packages for each software component.\n    --pkg-deb-dir               Directory to place debian packages after a debian build.\n    --pkg-rpm                   build RPM packages for each software component.\n    --pkg-rpm-dir               Directory to place RPM packages after an RPM build.\n    --pkg-tar                   build source tarballs for each software package.\n    --pkg-tar-dir               Directory to place source tarballs into after creating a dist.\n    --regex-selector            defines a regex to select specific packages.\n    --release-tag               Sets a release tag for source code distribution.\n    --repo-ci                   commit all modifications with the given changelog description.\n    --repo-clone                checkout or update the workspace source code from a remote repository.\n    --repo-co                   checkout or update the workspace source code from a local repository.\n    --repo-diff                 show workspace differences against the local repository.\n    --repo-init                 initialize those local repositories that do not exist yet.\n    --repo-keys                 show public keys stored by version control systems.\n    --repo-history              show locally stored history information of enabled software components.\n    --repo-history-last         number of history records to show.\n    --repo-pull                 pull the repositories from this server (e.g. repo-genesis3.cbi.utsa.edu).\n    --repo-push                 push the repositories to this server (e.g. repo-genesis3.cbi.utsa.edu).\n    --repo-serve                start the version control program in server mode to give others access to your code.\n                                this will automatically fork processes as needed and return control to the terminal.\n    --repo-setup                create a workspace interface to the version control repository if it does not exist yet.\n    --repo-status               compare workspace with source code repository branch head.\n    --repo-sync                 sync the repositories with this server (e.g. repo-genesis3.cbi.utsa.edu).\n    --tag                       set this tag on all packages.\n    --uninstall                 uninstall packages, cannot be combined with installation options.\n    --universal                 sets flags for building universal binaries on Mac OS X.\n    --upload-server             enable uploading packages to this server (e.g. https://frs.sourceforge.net/uploads).\n    --version                   print version information.\n    --version-tag               The software version for a source code distribution release.\n    --v|verbose                 tell what is being done, specify multiple times to get more feedback.\n    --website-prepare           prepare the website on your developer machine.\n    --website-upload            upload the website to the webserver.\n\noptions related to installation on a client machine:\n    --download-server           enable downloading packages from this server (e.g. downloads.sourceforge.net).\n    --src-tag                   use this tag for finding src directories on a client machine.\n    --src-dir                   use this dir as the base for directories on a client machine.\n\nSo on a client machine, for package xxx, the src are found in the\ndirectory <src-dir>/xxx-<src-tag>.  From there the build starts as\nusual.\n\n\noptions related to behavior of external applications:\n    --environment               fills in the environment, can be given multiple times.\n                                e.g. environment NEUROSPACES_HARNESS_OPTION_EMAIL=1 generates emails for tests that fail.\n\n","description":"Is a help message given ?"}],"arguments":["--help"]},{"command_tests":[{"read":"you must set option_src_dir and option_src_tag when working in client mode","description":"Is an error message given when invoking the build script without options ?"}],"description":"no options","command":"bin/neurospaces_build","arguments":[]},{"arguments":["--environment","NEUROSPACES_HARNESS_OPTION_EMAIL=1","--environment","a=b","--help"],"command":"bin/neurospaces_build","description":"help message","command_tests":[{"read":"\nenvironment=s:\n  - NEUROSPACES_HARNESS_OPTION_EMAIL=1\n  - a=b\n","description":"Can we set environment variables ?"}]},{"command_tests":[{"description":"Is an error message given when invoking the build script with wrong options ?","read":"bin/neurospaces_build: *** Error: you must set option_src_dir and option_src_tag when working in client mode"}],"command":"bin/neurospaces_build","description":"wrong options","arguments":["--tag","build-10","--verbose","--verbose","--verbose","--no-compile","--no-configure","--no-install","--regex","developer","--enable","developer","--dry-run"]}]}