#!/usr/bin/perl -w

my $packages
    = {
       neurospaces_prcs => {
			    directory => "$ENV{HOME}/neurospaces/source/c/snapshots/0",
			    disabled => 1,
			    priority => 1,
			    status => 'prcs diff neurospaces.prj `prcs 2>/dev/null execute --not ".*\(directory\|symlink\)" neurospaces.prj | grep -v "neurospaces\.prj" | grep -v "purkinjespine" ` -- --unified ',
			   },
       neurospaces => {
		       directory => "$ENV{HOME}/neurospaces/source/c/snapshots/0",
		       priority => 1,
		       status => 'mtn status',
		      },
       heccer => {
		  directory => "$ENV{HOME}/heccer/source/c/snapshots/0",
		  priority => 2,
		  status => 'mtn status',
		 },
       ssp => {
	       directory => "$ENV{HOME}/ssp/source/perl/snapshots/0",
	       priority => 3,
	       status => 'mtn status',
	      },
       studio => {
		  directory => "$ENV{HOME}/studio/source/perl/snapshots/0",
		  priority => 4,
		  status => 'mtn status',
		 },
       simulation_browser => {
			      directory => "$ENV{HOME}/simulation_browser/source/perl/snapshots/0",
			      priority => 5,
			      status => 'mtn status',
			     },
       geometry => {
		    directory => "$ENV{HOME}/geometry/source/c/snapshots/0",
		    priority => 6,
		    status => 'mtn status',
		   },
       configuration => {
			 directory => "$ENV{HOME}/configuration",
			 priority => 7,
			 status => 'mtn status',
			},
       project => {
		   directory => "$ENV{HOME}/project",
		   priority => 8,
		   status => 'mtn status',
		  },
       system => {
		   directory => "$ENV{HOME}/.",
		   priority => 8,
		   status => 'mtn status',
		 },
      };


foreach my $package_name (
			     sort
			     {
				 $packages->{$a}->{priority} <=> $packages->{$b}->{priority}
			     }
			     keys
			     %$packages)
{
    my $package = $packages->{$package_name};

    if ($package->{disabled})
    {
# 	if ($option_verbose)
# 	{
# 	    print "$0: $package_name skipped, disabled is $package->{disabled}\n";
# 	}

	next;
    }

    my $directory = $package->{directory};

    print "*** package $package_name\n";

    use Cwd;

    my $current_directory = getcwd();

    use File::chdir;

    {
	local $CWD = $package->{directory};

	my $command = $package->{status};

	system $command;

    }
}


